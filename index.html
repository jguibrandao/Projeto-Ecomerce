<html lang="pt-br">
    <head>
        <title>Loja virtual</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&family=Roboto:ital,wght@1,300&display=swap" rel="stylesheet">   
    </head>

    <body>
        <header>
            <div class="caixa-cabecalho">
                <img class="logo" src="imgs/comerce.png">
                <h1 class="titulo">Pipones digital shop</h1>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="sobre.html"> Sobre</a></li>
                        <li><a href="contato.html">Contato</a></li>
                        <li><a href="minhaConta.html">Minha conta</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <section id="main">
            <h2>Produtos</h2>
            <main id="produtos">

            </main>

            <h2>Seu Carrinho</h2>
            <div id="carrinho">

            </div>

        </section>

        <script>
            const itens = [
                {
                    id: 0,
                    nome: "Camiseta",
                    img: "imgs/imgPlaceholder.png",
                    quantidade: 0
                },
                {
                    id: 1,
                    nome: "Short",
                    img: "imgs/imgPlaceholder.png",
                    quantidade: 0
                },
                {
                    id: 2,
                    nome: "Sapato",
                    img: "imgs/imgPlaceholder.png",
                    quantidade: 0
                },
            ]

            inicializarLoja = () => {
                var containerProdutos = document.getElementById("produtos");
                itens.map((val)=> {
                    containerProdutos.innerHTML += `

                    <div class="produto-single"> 
                        <img src="${val.img}"/>
                        <p class="nome-produto">${val.nome}</p>
                        <a class="link-carrinho" key="${val.id}" href="#">Adicionar ao carrinho</a>
                    </div>
                    `;
                })
            }

            inicializarLoja();

            atualizarCarrinho = () => {
                var containerCarrinho = document.getElementById("carrinho");
                containerCarrinho.innerHTML = "";
                itens.map((val)=> {
                    if(val.quantidade > 0) {
                        containerCarrinho.innerHTML += `
                        <p class="nome-produto">${val.nome} | Quantidade: ${val.quantidade} 
                            <a class="link-remove" key="${val.id}" href="javascript:removerDoCarrinho(${val.id})">Remover item</a>
                        </p>
                        <hr>
                        `;
                    }
                })
            }

            var links = document.getElementsByClassName("link-carrinho");

            for(var i = 0; i < links.length; i++) {
                links[i].addEventListener("click", function() {
                    let key = this.getAttribute("key");
                    itens[key].quantidade++;
                    atualizarCarrinho();
                });
            }

            removerDoCarrinho = function(id) {
                for(var i = 0; i < itens.length; i++) {
                    if (itens[i].id == id) {
                        itens[i].quantidade -= 1;
                        atualizarCarrinho();
                    }
                }
            }

        </script>
    </body>
</html>